!function(){var e,t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},a={},o=t.parcelRequire2640;function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t,n,a,o,i){try{let r=null;if(window.XMLHttpRequest?r=new XMLHttpRequest:i(),r){if(r.onreadystatechange=()=>{o(r)},r.open(t,e,!0),null!==a)for(const e in a)r.setRequestHeader(e,a[e]);r.send(n)}else i()}catch(e){i()}}null==o&&((o=function(e){if(e in n)return n[e].exports;if(e in a){var t=a[e];delete a[e];var o={id:e,exports:{}};return n[e]=o,t.call(o.exports,o,o.exports),o.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){a[e]=t},t.parcelRequire2640=o),o.register("a1rh1",(function(e,t){"use strict";function n(e,t,n,a){var o=[e,t,n];return a&&o.push(a),o}Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.addCsmTag=e.exports.sendCsmCounter=e.exports.sendCsmLatencyMetric=void 0,e.exports.sendCsmLatencyMetric=function(e,t,a,o,i){var r;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(r||(r={})),r.hasOwnProperty(e)){var s=r[e].toString(),d=o?o+":":"";"function"==typeof window[s]&&(window[s].apply(this,n(e,"adplacements:"+d+t.replace(/_/g,":"),{wb:1},i)),a&&window[s].apply(this,n(e,"adplacements:"+d+a,{wb:1},i)))}},e.exports.sendCsmCounter=function(e,t,n,a){if(window.ue&&"function"==typeof window.ue.count){var o="adplacements:"+n;if(e&&(o+=":"+e.replace(/_/g,":")),window.ue.count(o,a),t){var i="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(i,a)}}},e.exports.addCsmTag=function(e,t,n,a){if(window.ue&&window.ue.tag){if(t){var o=e+":"+t.replace(/_/g,":")+(a?":"+a:"");window.ue.tag(o)}if(n){var i=e+":"+n+(a?":"+a:"");window.ue.tag(i)}t||n||window.ue.tag(e+(a?":"+a:""))}}})),o.register("iMV0g",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.events=e.exports.latency=void 0;var n=o("ej7sS"),a=o("h1Sm4");e.exports.latency=function(e){return new n.CsaLatency(e)},e.exports.events=function(){return new a.CsaEvents}})),o.register("ej7sS",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaLatency=void 0;var n=o("1Fd0t"),a=function(e){var t=this;if(this.mark=function(e,a){if(t.latencyPlugin)try{t.latencyPlugin("mark",e,a)}catch(e){(0,n.logError)("Error with 'markCsaLatencyMetric' CSA",e)}},window.csa)try{this.latencyPlugin=window.csa("Content",{element:e})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaLatency=a})),o.register("1Fd0t",(function(e,t){"use strict";var n=e.exports&&e.exports.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),a=e.exports&&e.exports.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),i=e.exports&&e.exports.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)"default"!==o&&Object.prototype.hasOwnProperty.call(e,o)&&n(t,e,o);return a(t,e),t};Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.logError=void 0;var r=i(o("a1rh1")),s="ERROR";e.exports.logError=function(e,t){var n=t||new Error(e);console.error(e,t),r.sendCsmCounter("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:s,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}})),o.register("h1Sm4",(function(e,t){"use strict";Object.defineProperty(e.exports,"__esModule",{value:!0}),e.exports.CsaEvents=void 0;var n=o("1Fd0t"),a=function(){var e=this;if(this.log=function(t,a,o){if(e.events)try{e.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:t+":"+a+":"+o,metricValue:1},{ent:"all"})}catch(e){(0,n.logError)("Error with 'logCsaEvent' CSA",e)}},this.setEntity=function(t){if(e.events)try{e.events("setEntity",{adCreativeMetaData:t})}catch(e){(0,n.logError)("Error with 'addCsaEntity' CSA",e)}},window.csa)try{this.events=window.csa("Events",{producerId:"adplacements"})}catch(e){(0,n.logError)("Error with initiating CSA",e)}};e.exports.CsaEvents=a}));class s{logTrace(e,t){if(void 0!==this.traceId){let n;const a=(new Date).getTime();this.storedTrace.hasOwnProperty(e)||(this.storedTrace[e]=[]);t===Object(t)?n=Object.assign&&"function"==typeof Object.assign?Object.assign({},t):JSON.parse(JSON.stringify(t)):(n='{ "'+e+'":"'+t+'"}',n=JSON.parse(n)),n.timeStamp=a,n.timeSinceAdStart=a-this.adStartTime,this.storedTrace[e].push(n)}}constructor(e,t){i(this,"traceId",void 0),i(this,"adStartTime",void 0),i(this,"storedTrace",void 0),i(this,"allData",void 0),this.traceId=e,this.adStartTime=t,this.storedTrace={};void 0!==e&&(()=>{const e=()=>{const e=()=>{console.log("failed to send request to /gp/adbarplus")},t=t=>{4===t.readyState&&200!==t.status&&e()};if(!(e=>{for(const t in e)if(e.hasOwnProperty(t))return!1;return!0})(this.storedTrace)){r("/gp/adbarplus?traceId="+this.traceId+"&systemName=browser","POST",JSON.stringify(this.storedTrace),{"Content-Type":"application/x-www-form-urlencoded"},t,e);for(const e in this.storedTrace)this.storedTrace.hasOwnProperty(e)&&delete this.storedTrace[e]}},t=(e,t)=>()=>e.apply(t),n=()=>{e()},a=()=>{e(),window.setInterval(t(n,this),3e3)};"loading"!==document.readyState?t(a,this)():window.addEventListener("load",t(a,this))})()}}var d,l=new RegExp(/((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))pd_rd_plhdr(=|%3D)t((&#[0-9]{2};)|(&#[0-9]{3};)|(&#[0-9]{4};)|(&[a-z]{2};)|(&[a-z]{3};)|(&[a-z]{4};)|(&[a-z]{5};)|(&[a-z]{6};)|(&[a-z]{7};)|(%[a-fA-F0-9]{2})|(\W))/),c="$1",u="$14";d=function(){return document};var p="data-val";function m(e){if("string"!=typeof e||""===e)return"";var t=d().getElementById("ape_"+e+"_placement_ClickTracking");if(!(t&&t.hasAttribute&&"function"==typeof t.hasAttribute&&t.hasAttribute(p)&&t.getAttribute&&"function"==typeof t.getAttribute))return"";var n=t.getAttribute(p);return"string"!=typeof n?"":n}e=function(e,t,n){return m([e,n,t].join("_"))};const h=t=>{if(!("pageType"in t)||!("subPageType"in t)||!("slotName"in t))return"";try{return e(t.pageType,t.subPageType,t.slotName)}catch(e){return""}},f=()=>window.P&&window.P.AUI_BUILD_DATE,w=(e,t,n)=>{var a;return f()&&"function"==typeof(null===window||void 0===window||null===(a=window.P)||void 0===a?void 0:a.guardError)?P.guardError("APE-SafeFrame",e):(...a)=>{try{e(...a)}catch(e){"function"==typeof t&&n&&t(n,e)}}},g=(e,t)=>{if(e&&t)for(const n in t)e.style[n]=t[n];return e},v={1027:"Sponsored Display DRA"},b=(e,t)=>(e=>"V"===e)(e)&&!v.hasOwnProperty(t),S={1:"Enabled",0:"NotEnabled","-1":"Unknown"},y=e=>(e=>{let t,n="";const a=e.length;for(let o=0;o<a;o++)t=e[o],n+=String.fromCodePoint(t>251&&t<254&&o+5<a?1073741824*(t-252)+(e[++o]-128<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>247&&t<252&&o+4<a?(t-248<<24)+(e[++o]-128<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>239&&t<248&&o+3<a?(t-240<<18)+(e[++o]-128<<12)+(e[++o]-128<<6)+e[++o]-128:t>223&&t<240&&o+2<a?(t-224<<12)+(e[++o]-128<<6)+e[++o]-128:t>191&&t<224&&o+1<a?(t-192<<6)+e[++o]-128:t);return n})(((e,t)=>{const n=e.replace(/[^A-Za-z0-9+/]/g,""),a=n.length,o=t?Math.ceil((3*a+1>>2)/t)*t:3*a+1>>2,i=new Uint8Array(o);let r,s,d=0,l=0;for(let e=0;e<a;e++)if(s=3&e,d|=((c=n.charCodeAt(e))>64&&c<91?c-65:c>96&&c<123?c-71:c>47&&c<58?c+4:43===c?62:47===c?63:0)<<6*(3-s),3===s||a-e==1){for(r=0;r<3&&l<o;)i[l]=d>>>(16>>>r&24)&255,r++,l++;d=0}var c;return i})(e));var E,I,T,R;(I=E||(E={})).START="adload_start",I.CALLBACK="adload_delayload",I.IFRAME_CREATED="adload_iframecreated",(R=T||(T={})).SF_LIBRARY="sflibrary_",R.SF_HTML="sfhtml_";const A={1:"abpstatus_enabled",0:"abpstatus_notenabled","-1":"abpstatus_unknown"};var D,O,_;function L(e){return window[e]&&"object"==typeof window[e].adDetails?window[e].adDetails:null}(D||(D={})).VERSION="sfversion_",(_=O||(O={})).LOGGING_FAILED="resourceTimingData_LoggingFailed",_.LOGGING_SUCCESSFUL="resourceTimingData_LoggingSuccessful",_.DEPENDENCIES_NOT_MET="resourceTimingData_DependenciesNotMet",_.DEPENDENCIES_MET="resourceTimingData_DependenciesMet";const M=e=>{e.fallbackStaticAdClickUrl&&((e=>{let t="";return e&&(t=e.indexOf("//")>-1?e.split("/")[2]:e.split("/")[0]),0!==t.length})(e.fallbackStaticAdClickUrl)||(e.fallbackStaticAdClickUrl=window.location.protocol+"//"+window.location.host+e.fallbackStaticAdClickUrl))},N={};function C(e,t,n){e&&e.id&&!N[e.id]&&window.P&&f()&&window.P.when("gw-video-orchestrator").execute((a=>{a.subscribe(e,t,n),N[e.id]=!0}))}const k=()=>window.innerHeight||document.documentElement.clientHeight,x=()=>window.innerWidth||document.documentElement.clientWidth,F=e=>e.getBoundingClientRect().top-k(),H=e=>{const t={atf:B(e)};if(!e||!window||!document)return t;const n=W(),a=G(e),o=Q(e);return{atf:B(e),geom:{win:n,self:a,exp:o},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}}},B=e=>{if(!e)return"unknown";const t=function(e){if(!window||!(null===document||void 0===document?void 0:document.body))return null;const t=J(e,null),n=k(),a=x(),o=document.body.getBoundingClientRect(),i=Math.max(0,Math.min(o.left+a,t.r)-t.l),r=Math.max(0,Math.min(o.top+n,t.b)-t.t),s=i*r/(t.h*Math.min(t.w,a));return Number(Math.min(1,Math.max(0,s)).toFixed(2))}(e);return null==t?"unknown":t>=.5};const z=e=>{if(!window||!document)return null;const t=U(e),n=W(),a=G(null,t);return{atf:"unknown",geom:{win:n,self:a,exp:Q(null,t)},payload:{wh:n.h,ww:n.w,sx:window.scrollX,sy:window.scrollY,ah:a.h,aw:a.w,top:a.t,left:a.l}}},j=(e,t)=>{const n=J(e),a=J(t),o=x(),i=k();return n&&a&&(Math.abs(n.t-a.b)<i||Math.abs(n.b-a.t)<i)&&(Math.abs(n.l-a.r)<o||Math.abs(n.r-a.l)<o)},U=e=>{const t=e.initialBoundingRect,n=t.top-(window.scrollY-e.originalScrollY),a=n+e.adHeight,o=t.left-(window.scrollX-e.originalScrollX);return{top:n,bottom:a,left:o,right:o+e.adWidth,width:e.adWidth,height:e.adHeight}},V=(e,t,n)=>{let a=0;return"visible"!==document.visibilityState?a:(a=e>0?n-e:t>0?Math.min(t,n):0,Math.min(a,t-e))},W=()=>{const e=window.screenY?window.screenY:window.screenTop,t=window.screenX?window.screenX:window.screenLeft,n=x(),a=k();return{t:e,l:t,w:n,h:a,b:e+a,r:t+n}},G=(e,t)=>{const n=J(e,t),a=q(n);return{t:n.t,l:n.l,r:n.r,b:n.b,w:n.w,h:n.h,z:n.z,xiv:a.xiv,yiv:a.yiv,iv:a.iv}},J=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:n.right,b:n.bottom,w:n.width,h:n.height,z:e?Number(window.getComputedStyle(e,null).zIndex):NaN}},q=e=>{const t=x(),n=k(),a=Math.max(0,V(e.t,e.b,n)),o=Math.max(0,V(e.l,e.r,t)),i=a*o,r=e.h*Math.min(e.w,t);return 0!==r||0!==i?{xiv:Number(Math.min(1,o/e.w).toFixed(2)),yiv:Number(Math.min(1,a/e.h).toFixed(2)),iv:Number(Math.min(1,Math.max(0,i/r)).toFixed(2))}:{xiv:0,yiv:0,iv:0}},Q=(e,t)=>{const n=t||(null==e?void 0:e.getBoundingClientRect());return{t:n.top,l:n.left,r:x()-n.right,b:k()-n.bottom,xs:Math.max(document.body.scrollWidth,document.documentElement.scrollWidth)>x()?1:0,yx:Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)>k()?1:0}};let Y=null;function K(e,t,n){const a=t=>{n.sendCustomMessageToAd(e.options.arid,"videoAutoplayResponse",t)};var o;e.options.expParams&&e.options.expParams.noVideoAutoplay?a(!1):(o=e.options.pageType)&&"gateway"===o.toLowerCase()?C(e.iframe,a,t):Y===e.options.arid?a(!0):null===Y&&function(e){const t=document.getElementsByTagName("video");for(let n=0;n<t.length;++n)if(!t[n].paused&&j(e,t[n]))return!1;return!0}(e.iframe)?(Y=e.options.arid,a(!0)):a(!1)}function X(){f()&&window.P&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect()})),Y=null}function $(e){var t;(t=e.iframe)&&window.P&&f()&&window.P.when("gw-video-orchestrator").execute((e=>{e.elect(t)})),Y=e.options.arid}var Z,ee,te,ne,ae;(ee=Z||(Z={})).START="adload:start",ee.CALLBACK="adload:delayloadcallback",ee.IFRAME_CREATED="adload:iframecreated",(ne=te||(te={})).SF_LIBRARY="cache:sflibrary:",ne.SF_HTML="cache:sfhtml:",(ae||(ae={})).API="messenger:";const oe={1:"abpstatus:enabled",0:"abpstatus:notenabled","-1":"abpstatus:unknown"},ie={VERSION:"sfversion"};var re,se;(se=re||(re={})).NEXUS_CLIENT_NOT_DEFINED="ResourceTimingData.NexusClientNotDefined",se.LOGGING_FAILED="ResourceTimingData.LoggingFailed",se.LOGGING_SUCCESSFUL="ResourceTimingData.LoggingSuccessful",se.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet";const de={ALLOWLISTED:"custommessage:allowlisted",NOT_ALLOWLISTED:"custommessage:notallowlisted"};var le,ce;function ue(e,t,n,a,o){let i;if(function(e){e.bb="uet",e.af="uet",e.cf="uet",e.be="uet",e.ld="uex"}(i||(i={})),!i.hasOwnProperty(e))return;const r=i[e].toString(),s=a?a+":":"";"function"==typeof window[r]&&(window[r].apply(this,he(e,"adplacements:"+s+t.replace(/_/g,":"),{wb:1},o)),n&&window[r].apply(this,he(e,"adplacements:"+s+n,{wb:1},o)))}function pe(e,t,n,a){if(window.ue&&"function"==typeof window.ue.count){let o="adplacements:"+n;if(e&&(o+=":"+e.replace(/_/g,":")),window.ue.count(o,a),t){const e="adplacements:"+(n&&t?n+":":n)+t;window.ue.count(e,a)}}}function me(e,t,n,a){if(window.ue&&window.ue.tag){if(t){const n=e+":"+t.replace(/_/g,":")+(a?":"+a:"");window.ue.tag(n)}if(n){const t=e+":"+n+(a?":"+a:"");window.ue.tag(t)}t||n||window.ue.tag(e+(a?":"+a:""))}}function he(e,t,n,a){const o=[e,t,n];return a&&o.push(a),o}function fe(e,t,n){var a,o=n||{},i=o.noTrailing,r=void 0!==i&&i,s=o.noLeading,d=void 0!==s&&s,l=o.debounceMode,c=void 0===l?void 0:l,u=!1,p=0;function m(){a&&clearTimeout(a)}function h(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var s=this,l=Date.now()-p;function h(){p=Date.now(),t.apply(s,o)}function f(){a=void 0}u||(d||!c||a||h(),m(),void 0===c&&l>e?d?(p=Date.now(),r||(a=setTimeout(c?f:h,e))):h():!0!==r&&(a=setTimeout(c?f:h,void 0===c?e-l:e)))}return h.cancel=function(e){var t=(e||{}).upcomingOnly,n=void 0!==t&&t;m(),u=!n},h}(ce=le||(le={})).PAGE_PRERENDER="pixelcondition:pageprerender",ce.AD_MISSING="pixelcondition:admissing";const we=new class{constructor(){i(this,"latencyPlugin",void 0),i(this,"events",void 0)}},ge=e=>{window.csa?we.latencyPlugin=window.csa("Content",{element:e}):console.log(window)},ve=(e,t)=>{try{we.latencyPlugin("mark",e,t)}catch(e){Ce("Error with initiating CSA",e)}},be=(e,t,n)=>{try{we.events("log",{schemaId:"ApeSafeframe.csaEvent.1",metricName:e+":"+t+":"+n,metricValue:1},{ent:"all"})}catch(e){Ce("Error with initiating CSA",e)}},Se=e=>{try{we.events("setEntity",{adCreativeMetaData:e})}catch(e){Ce("Error with initiating CSA",e)}};class ye{sendLatencyMetric({latencyMetricType:e,placementId:t,placementName:n,timestamp:a}){ue(e.csmKey,n,t,e.csmMessage,null==a?void 0:a.getTime()),function(e,t,n){const a=function(e){return document.getElementById(function(e){return"ape_"+e+"_placement"}(e))}(t);a&&(ge(a),ve(e.csaKey,null==n?void 0:n.getTime()))}(e,n,a)}}const Ee=()=>new ye,Ie="sfImpression",Te="PollingSfImpression",Re="LightAdImpression",Ae="Polling_LightAdImpression",De=(e,t,n)=>({csaKey:e,csmKey:t,csmMessage:n}),Oe=De("bodyBegin","bb",Ie),_e=De("bodyBegin","bb",Te),Le=(De("bodyBegin","bb",Re),De("bodyBegin","bb",Ae),De("bodyEnd","be"),De("clickToATF","af")),Me=De("criticalFeature","cf"),Pe=(De("criticalFeature","cf",Ie),De("criticalFeature","cf",Re),De("loaded","ld"),De("loaded","ld",Ie),De("loaded","ld",Te),De("loaded","ld",Re),De("loaded","ld",Ae),De("viewablelatency:loaded","ld","viewablelatency")),Ne="ERROR";function Ce(e,t){const n=t||new Error(e);console.error(e,t),pe("",null,"safeFrameError",1),window.sfHostLogErrors&&(window.ueHostLogError?window.ueHostLogError(n,{logLevel:Ne,attribution:"APE-safeframe",message:e+" "}):"undefined"!=typeof console&&console.error&&console.error(e,n))}const ke=()=>{const e=window.location.hostname.split(".").pop();let t="na";return/^(com|ca|mx|br)$/.test(e)?t="na":/^(uk|de|fr|it|es|in|ae|sa|nl|tr|se|pl|eg|be)$/.test(e)?t="eu":/^(jp|au|sg)$/.test(e)?t="fe":/^(cn)$/.test(e)&&(t="cn"),"https://images-"+t+".ssl-images-amazon.com"},xe=(e,t)=>e.height===t.height&&e.width===t.width,Fe=(e,t,n)=>{if(!t||"object"!=typeof t)return!1;for(let a=0,o=t.length;a<o;a++)if(n(e,t[a]))return!0;return!1},He=()=>"IntersectionObserver"in window&&"IntersectionObserverEntry"in window,Be=e=>e&&0===Object.keys(e).length&&e.constructor===Object;function ze(e,t){const n=document.createElement("iframe");return n.name=JSON.stringify(e),n.id=t,n.height=Qe(e.size.height)||"250px",n.width=Qe(e.size.width)||"300px",n.className=e.iframeClass||"",n.setAttribute("frameborder","0"),n.setAttribute("marginheight","0"),n.setAttribute("marginwidth","0"),n.setAttribute("scrolling","no"),n.setAttribute("allowtransparency","true"),n.setAttribute("data-arid",e.arid),n.style.cssText=e.iframeExtraStyle||"",n}const je=["allow-scripts","allow-popups","allow-popups-to-escape-sandbox","allow-top-navigation-by-user-activation"],Ue=je.concat(["allow-same-origin"]),Ve=(e,t,n)=>{const a=ze(e,t);return a.srcdoc=decodeURIComponent(n),a.sandbox=je.join(" "),a},We=(e,t,n)=>{const a=ze(e,t);return a.src=n,a.sandbox=Ue.join(" "),a};function Ge(e){const t=document.getElementById(e);void 0!==t&&t&&(t.style.display="none")}function Je(e,t,n){const a=document.getElementById(t[e].placementDivId),o=document.getElementById(t[e].wrapperDivId)||a,i=document.getElementById(t[e].iframeId);let r=n.resizePlacementWidthThreshold;const s=n.resizePlacementStyleAboveThreshold,d=n.resizePlacementStyleBelowThreshold;r=parseInt(r,10),o&&i&&r&&s&&d&&(o.offsetWidth<r?g(i,d):g(i,s))}function qe(e,t,n,a,o,i){try{const r=document.getElementById(i[e].placementDivId),s=document.getElementById(i[e].wrapperDivId)||r,d=document.getElementById(i[e].iframeId);if(null===s||null===r||null===d)return;const l=Ye(n),c=Ye(t),u=!c&&!l,p=parseInt(t,10);let m=c?d.offsetWidth:p,h=l?d.offsetHeight:parseInt(n,10);const f=parseInt(a,10),w=e=>{u&&(h=Math.round(e*h/m)),m=Math.round(e)},g=0===s.offsetWidth?x():s.offsetWidth;f&&k()<x()?w(f):w(g),o&&o.adMap&&o.adMap[e]&&o.adMap[e].options&&o.adMap[e].options.slotSnapshot&&(o.adMap[e].options.slotSnapshot.adHeight=h,o.adMap[e].options.slotSnapshot.adWidth=m);const v=Qe(m),b=Qe(u?h:n);d.style.height=b,d.style.width=v;const S={width:v,height:b};s!==r&&(r.style.height=b,o.sendMessageToAd(e,"resizeCreativeWrapper",S)),"Detail_hero-quick-promo_Desktop"===i[e].slotId&&(pe(i[e].slotId,o.adMap[e].options.placementId,"OffsetLeft",d.offsetLeft),pe(i[e].slotId,o.adMap[e].options.placementId,"OffsetTop",d.offsetTop),pe(i[e].slotId,o.adMap[e].options.placementId,"OffsetWidth",d.offsetWidth),pe(i[e].slotId,o.adMap[e].options.placementId,"OffsetHeight",d.offsetHeight))}catch(t){Ce("Error resizing ad: "+i[e].slotId,t)}}function Qe(e){return!e||Ye(e)||function(e){return e.length>2&&"px"===e.substring(e.length-2)}(e)?e:e+"px"}function Ye(e){return e.length>1&&"%"===e.charAt(e.length-1)}function Ke(e,t,n,a,o){const i="undefined"!=typeof P,r="undefined"!=typeof amznJQ,s="number"==typeof n&&0!==n?()=>{setTimeout(t,n)}:t,d=!!o&&JSON.parse(o);if(void 0===e)s();else if("windowOnLoad"===e)"complete"===document.readyState?s():window.addEventListener("load",s);else if("spATFEvent"===e)i?P.when("search-page-utilities").execute((e=>{window.searchPageUtils.afterEvent("spATFEvent",s)})):r?amznJQ.available("search-js-general",(()=>{window.SPUtils.afterEvent("spATFEvent",s)})):s();else if("aboveTheFold"===e)i?P.when("af").execute(s):r?amznJQ.onCompletion("amznJQ.AboveTheFold",s):s();else if("criticalFeature"===e)i?P.when("cf").execute(s):r?amznJQ.onCompletion("amznJQ.criticalFeature",s):s();else if("r2OnLoad"===e)i?P.when("r2Loaded").execute(s):r?amznJQ.onReady("r2Loaded",s):s();else if(e.match("[^:]+:.+")){const t=e.split(":"),n=t[0].split("."),a=t[1],o=t.length>2?t[2]:a;i?P.when(o,"A").execute(s):r&&n.length>1?amznJQ[n[1]](a,s):s()}else if(e.match(/^\d{1,4}px$/g))Xe(parseInt(e,10),s,a,d,((e,t)=>{const n=F(e);return e&&n<=t}));else{const t=/^reached(\d{1,5}px)FromTop$/g.exec(e);t?Xe(parseInt(t[1],10),s,a,d,((e,t)=>window.scrollY+k()>=t)):s()}}function Xe(e,t,n,a,o){let i=!1;const r=()=>{o(n,e)&&(t(),i=!0)},s=w(fe(20,(()=>{r(),i&&(window.removeEventListener("scroll",s),window.removeEventListener("resize",s))})));window.addEventListener("scroll",s),window.addEventListener("resize",s),a&&r()}const $e=new class{customMessage(e,t,n,a,o){const i=this.msgListeners;try{"undefined"!==n&&Array.isArray(n)&&(n.indexOf(e)>-1&&i[e]?(pe(null,null,de.ALLOWLISTED+":"+e,1),i[e](t)):-1===n.indexOf(e)?(pe(null,null,de.NOT_ALLOWLISTED,1),pe(a,o,de.NOT_ALLOWLISTED,1)):Ce("Unrecognized custom message key: "+e))}catch(e){Ce("Custom Message Error",e)}}isElementInDOM(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}constructor(e,t,n){i(this,"adMap",void 0),i(this,"supportedCommands",void 0),i(this,"msgListeners",void 0),i(this,"getIframe",(e=>{var t;const n=this.adMap,a=n[e].options;if(Be(n)||Be(a))return null;const o="ape_"+a.slot+"_iframe";return n[e].iframe&&(n[e].iframe=n[e].iframe&&(null===(t=n[e].iframe)||void 0===t?void 0:t.innerHTML)?n[e].iframe:document.getElementById(o)),n[e].iframe})),i(this,"sendMessageToAd",((e,t,n)=>{const a=this.getIframe(e),o=a?a.contentWindow:null;if(o){const e={command:t,data:n};o.postMessage(e,"*")}})),i(this,"receiveMessage",(e=>{const t=e=>{for(const n in this.adMap){var t;if((null===(t=this.getIframe(n))||void 0===t?void 0:t.contentWindow)===e.source)return!0}return!1},n=this.adMap;if(Be(n))return;try{var a,o,i,r;if((null===(r=null==e||null===(a=e.data)||void 0===a||null===(o=a.message)||void 0===o||null===(i=o.id)||void 0===i?void 0:i.toLowerCase())||void 0===r?void 0:r.indexOf("mash"))>-1)throw"Received Mash message"}catch(e){return}const s=e.data,d=n[s.arid];try{const n=this.supportedCommands,a=((e,n)=>e&&e.options&&t(n))(d,e);if("object"!=typeof s.data||!n.hasOwnProperty(s.command))return;if(!a)throw"Invalid Message Origin: "+e.origin;const o=n[s.command];o&&(d.options.debug&&"undefined"!=typeof console&&console.log(e),o(d,s.data))}catch(t){let n="Problem with message: "+e.data;void 0!==s&&(n+=this.appendErrorDetails(s.arid)),Ce(n,t)}})),i(this,"appendErrorDetails",(e=>{const t=this.adMap;if(Be(t))return"";let n="";if(void 0!==t[e]){const a=t[e].options;void 0!==a.aanResponse&&(n=" Ad Details: "+JSON.stringify(a.aanResponse))}return n})),i(this,"registerCustomMessageListener",((e,t,n)=>{let a=!1;const o=this.msgListeners;try{if(!o[e]||"function"!=typeof o[e]||n)o[e]=t,a=!0;else{Ce("Duplicate Key",new Error("Custom message listener already exists for key: "+e))}}catch(e){Ce("Error registering custom message listener",e)}return a})),i(this,"sendCustomMessage",((e,t)=>{const n=this.adMap,a={key:e,data:t};for(const e in n)this.sendMessageToAd(e,"customMessage",a)})),i(this,"sendCustomMessageToAd",((e,t,n)=>{const a={key:t,data:n};this.sendMessageToAd(e,"customMessage",a)})),i(this,"takeSnapshotOfSlotPosition",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||Be(t)||!n||Be(n))return;const a=this.getIframe(e);var o;this.adMap[e].options.slotSnapshot={initialBoundingRect:(o=a).getBoundingClientRect(),adHeight:o.offsetHeight,adWidth:o.offsetWidth,originalScrollX:window.scrollX,originalScrollY:window.scrollY}})),i(this,"startPixelTracking",((e,t)=>{let n="prerender"!==document.visibilityState;const a=this.getIframe(e);let o,i,r=this.isElementInDOM(a);const s=this.adMap&&this.adMap[e]&&this.adMap[e].options;!n&&s&&pe(s.slot,s.placementId,le.PAGE_PRERENDER,1),!r&&s&&pe(s.slot,s.placementId,le.AD_MISSING,1);const d=()=>!(!n||!r)&&(t(),i&&document.removeEventListener("visibilitychange",i),o&&He()&&o.unobserve(a),!0);if(!d()){const e={root:document.documentElement};He()&&(o=new IntersectionObserver((e=>{try{if(1===e.length){e[0].isIntersecting?(r=!0,d()):r=!1}}catch(e){Ce("Error executing intersectionObserver callback")}}),e),o.observe(a)),i=()=>{try{"prerender"!==document.visibilityState?(n=!0,d()):n=!1}catch(e){Ce("Error executing pageVisibilityHandler callback")}},document.addEventListener("visibilitychange",i)}})),i(this,"updateViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options;if(!t||Be(t)||!n||Be(n))return;const a=this.getIframe(e),o=t[e].options.viewabilityStandards,i=H(a);null!==i&&(i.viewabilityStandards=o,this.sendMessageToAd(e,"updateViewability",i))})),i(this,"updateNoInventoryViewability",(e=>{const t=this.adMap,n=t&&t[e]&&t[e].options,a=n&&n.slotSnapshot;if(!t||Be(t)||!n||Be(n)||!a)return;const o=n.viewabilityStandards,i=z(a);null!==i&&(i.viewabilityStandards=o,this.sendMessageToAd(e,"updateViewability",i))})),this.adMap=e||{},this.supportedCommands=t||{},this.msgListeners=n||{}}},Ze="unfired_cod_impressions_dictionary";function et(){let e;try{e=JSON.parse(localStorage.getItem(Ze)||"{}")}catch(t){e={}}return e}function tt(){try{localStorage.removeItem(Ze)}catch(e){}}function nt(e,t){const n=et();n[e]=t,it(n)}function at(){const e=et(),t=[];for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&""!==e[n]&&t.push(e[n]);return tt(),t}function ot(e){const t=et();t[e]&&(t[e]="",it(t))}function it(e){try{localStorage.setItem(Ze,JSON.stringify(e))}catch(e){}}var rt,st,dt,lt,ct,ut;(st=rt||(rt={})).IMPRESSION="localstorage:impression",st.ERROR="localstorage:error",st.CONTROL="localstorage:inactive",st.TREATMENT="localstorage:t1",st.NO_WEBLAB="localtestorage:missing",(lt=dt||(dt={})).IMPRESSION="localstorage_impression",lt.ERROR="localstorage_error",lt.CONTROL="localstorage_inactive",ut=function(){return URL};var pt="{}",mt="?",ht="&",ft="=";function wt(e,t){var n={};for(var a in e)n[a]=e[a];for(var o in t)n[o]=t[o];return n}ct=function(e,t,n){if("string"!=typeof e||""===e)throw new Error("Invalid url input to addJSONQueryParamToURL: "+JSON.stringify({url:e}));if("string"!=typeof t||""===t)throw new Error("Invalid queryParamKey input to addJSONQueryParamToURL: "+JSON.stringify({queryParamKey:t}));if("object"!=typeof n)throw new Error("Invalid queryParamValueObject input to addJSONQueryParamToURL: "+JSON.stringify({queryParamValueObject:n}));try{var a=new(ut())(e),o=a.searchParams.get(t)?a.searchParams.get(t):"{}",i=JSON.parse(o);if("object"!=typeof i)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:i}));var r=wt(i,n);return a.searchParams.set(t,JSON.stringify(r)),a.toString()}catch(a){return function(e,t,n){var a,o=e.indexOf(mt),i={};if(o>0){a=e.substring(0,o),decodeURIComponent(e.substring(o+1)).split(ht).forEach((function(e){if(e){var t=e.split(ft);i[t[0]]=t[1]}}));var r=i[t]?i[t]:pt,s=JSON.parse(r);if("object"!=typeof s)throw new Error("Existing query param value was not an object: "+JSON.stringify({existingJSONObject:s}));var d=wt(s,n);i[t]=JSON.stringify(d)}else a=e,i[t]=JSON.stringify(n);var l=[];for(var c in i)l.push(encodeURIComponent(c)+ft+encodeURIComponent(i[c]));return a+mt+l.join(ht)}(e,t,n)}};const gt=(e,t)=>{const n=!(!e.options.expParams||!e.options.expParams.enableViewabilityTrackerOnLoad)&&JSON.parse(e.options.expParams.enableViewabilityTrackerOnLoad),a=()=>{try{ot(e.options.arid),$e.sendMessageToAd(e.options.arid,"fireImpression",t),vt(!n,e,t)}catch(e){Ce("Error firing pixels. data: "+JSON.stringify(t))}};vt(n,e,t);const o=w((()=>{$e.startPixelTracking(e.options.arid,a)}));Ke(e.options.firePixelsAfter,o,0,e.slot,e.options.expParams?e.options.expParams.firePositionTrackerOnLoad:"false")},vt=(e,t,n)=>{e&&(n.isNoInventory?$e.supportedCommands.enableNoInventoryViewabilityTrackerAndInvokeFallback(t):$e.supportedCommands.enableViewabilityTracker(t))};function bt(e){$e.startPixelTracking(e.options.arid,(()=>{try{if(e.options.aaxImpPixelUrl){const t=ct(e.options.aaxImpPixelUrl,"pj",{measurementMethod:"cod_client"});nt(e.options.arid,t)}$e.sendMessageToAd(e.options.arid,"fireMetricsForLegacyImpression",{})}catch(e){Ce("Error firing legacy impression metrics")}}))}const St={sd:1},yt=["name","entryType","startTime","duration","initiatorType","nextHopProtocol","workerStart","redirectStart","redirectEnd","fetchStart","domainLookupStart","domainLookupEnd","connectStart","connectEnd","secureConnectionStart","requestStart","responseStart","responseEnd","transferSize","encodedBodySize","decodedBodySize"];class Et{log(){if(!(window.ue&&window.ue.event&&window.ue.attach))return pe(null,null,re.DEPENDENCIES_NOT_MET,1),void be(O.DEPENDENCIES_NOT_MET,this.options.slot,this.options.placementId);pe(null,null,re.DEPENDENCIES_NOT_MET,0),be(O.DEPENDENCIES_MET,this.options.slot,this.options.placementId),"complete"===document.readyState?this.logMessage():window.ue.attach("load",this.logMessage)}extractResourceProperties(e){let t={};const n={};for(let a=0;a<yt.length;a++)t=yt[a],void 0!==e[t]&&(n[t]=e[t]);return n}getPageInfo(){return{source:"safeframe",pageType:window.ue_pty||null,subPageType:window.ue_spty||null,pageTypeId:this.getPageTypeIdKey()||null}}getPageTypeIdKey(){return this.options.slot+"_"+this.options.adCreativeMetaData.adNetwork+"_"+this.options.adCreativeMetaData.adProgramId+"_"+this.options.adCreativeMetaData.adCreativeId+"_"+this.options.adCreativeMetaData.adId}getResources(){const e=[];for(let t=0;t<this.data.resourceTimingData.length;t++){const n=this.data.resourceTimingData[t];0!==n.responseEnd&&e.push(this.extractResourceProperties(n))}return e}composeMessage(){const e=this.getPageInfo();return e.resourceData=this.getResources(),e}logMessage(){const e=this.composeMessage();let t=!1;window.ue.event&&(t=window.ue.event(e,"adplacements","csm.ResourceTimingHit.2",St),t?(pe(null,null,re.LOGGING_SUCCESSFUL,1),pe(null,null,re.LOGGING_FAILED,0),be(O.LOGGING_SUCCESSFUL,this.options.slot,this.options.placementId)):(pe(null,null,re.LOGGING_SUCCESSFUL,0),pe(null,null,re.LOGGING_FAILED,1),be(O.LOGGING_FAILED,this.options.slot,this.options.placementId)))}constructor(e,t){i(this,"options",void 0),i(this,"data",void 0),this.options=e,this.data=t}}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},a=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(a=a.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),a.forEach((function(t){i(e,t,n[t])}))}return e}function Tt(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}var Rt,At;(At=Rt||(Rt={})).BEGIN_TO_RENDER_CLIENT="btr_client",At.COUNT_ON_DOWNLOAD_CLIENT="cod_client";const Dt=(e,t,n,a,o)=>{const i=document.createElement("img");i.id=t,i.src=e,i.style.display="none",i.onload=a,i.onerror=o,n.appendChild(i)};var Ot,_t,Lt,Mt;!function(e){e.IFRAME_INIT="adload:iframeinitialized",e.RENDER_START="adload:renderstart",e.RENDER_END="adload:renderend",e.CREATIVE_WRITTEN="adload:creativewritten",e.IMP="adload:impression",e.UNSERVED_IMP="adload:unservedimpression",e.VIEWABILITY="adload:viewability",e.UNSERVED_VIEWABILITY="adload:unservedviewability",e.MEASURABILITY="adload:measurability",e.MEASUREMENT_HTML="adload:measurementhtml"}(Ot||(Ot={})),(Lt=_t||(_t={})).REQUEST_START="adfetch:request",Lt.PUNT_RETURNED="adfetch:punt",Lt.ERROR_RETURNED="adfetch:error",Lt.EMPTY_RESPONSE="adfetch:noad",Lt.RENDERED_AD="adfetch:renderad",Lt.RENDER_ERROR="adfetch:rendererror",Lt.HTTP_ERROR="adfetch:httperror",Lt.EXCEPTION="adfetch:exception",function(e){e.DEPENDENCIES_NOT_MET="ResourceTimingData.DependenciesNotMet"}(Mt||(Mt={}));var Pt,Nt,Ct,kt,xt,Ft;function Ht(e,t,n,a,o,i){if("undefined"==typeof performance||void 0===performance.getEntriesByType)return;const r=performance.getEntriesByType("resource");if(void 0===r||!Array.isArray(r)||r.length<1||void 0===r[0].duration)return;const s=e=>{o(n,a,e,1)},d=void 0!==r[0].transferSize?(e,t,o)=>{0===e.transferSize?(s(t+"cached"),i(o+"cached",n,a)):(s(t+"uncached"),i(o+"uncached",n,a))}:(e,t,o)=>{e.duration<20?(s(t+"fastload"),i(o+"fastload",n,a)):(s(t+"slowload"),i(o+"slowload",n,a))},l=(e,t,n)=>{if(e)for(let a=0;a<r.length;a++){const o=r[a];if(o.name&&-1!==o.name.indexOf(e))return void d(o,t,n)}};l(e,te.SF_LIBRARY,T.SF_LIBRARY),l(t,te.SF_HTML,T.SF_HTML)}(Nt=Pt||(Pt={})).LEGACY_IMPRESSION_COUNTER="imp:legacy",Nt.GLOBAL_IMPRESSION_FIRED_COUNTER="impressionFired",(kt=Ct||(Ct={})).LOADED="btr:loaded",kt.ERROR="btr:error",kt.IMPRESSION="btr:impression",kt.NO_IMAGES="btr:noimages",kt.TAGGED="btr:taggedcreative",(Ft=xt||(xt={})).POLL_END="crem:pollingcomplete",Ft.POLL_BTR="crem:pollingisbtr";const Bt=e=>e+"_Feedback";var zt,jt;(jt=zt||(zt={}))[jt.BOTTOM=0]="BOTTOM",jt[jt.TOP=1]="TOP";class Ut{async addSponsoredLabelWithFeedbackLink(e,t){e.appendChildTo(this.parentHtmlId,this);const n=await t.getSponsoredLabelAndFeedbackLink(this.urlPathAndParameter);return(null==n?void 0:n.isOk())?(e.updateElement(this.getHtmlId(),n),n):null}getHtmlId(){return Bt(this.parentHtmlId)}constructor(e,t,n,a,o,r){i(this,"parentHtmlId",void 0),i(this,"feedbackStyles",void 0),i(this,"labelText",void 0),i(this,"labelStyles",void 0),i(this,"position",void 0),i(this,"urlPathAndParameter",void 0),this.parentHtmlId=e,this.feedbackStyles=t,this.labelText=n,this.labelStyles=a,this.position=o,this.urlPathAndParameter=r}}class Vt{open(e){e.clickChildLink(this)}getHtmlId(){return Bt(this.parentHtmlId)}constructor(e){i(this,"parentHtmlId",void 0),this.parentHtmlId=e}}class Wt{createSponsoredLabelWithFeedbackLink(e,t){t.request(),e.addSponsoredLabelWithFeedbackLink(this.feedbackHtmlPort,this.feedbackApiPort).then((e=>{t.success(e)})).catch((()=>{t.error()})),t.labelRendered()}openModal(e){e.open(this.feedbackHtmlPort)}labelRendered(e){e.request(),e.success("Rendered inside the Safeframe"),e.labelRendered()}constructor(e,t){i(this,"feedbackHtmlPort",void 0),i(this,"feedbackApiPort",void 0),this.feedbackHtmlPort=e,this.feedbackApiPort=t}}class Gt{logFeedbackRequest(){Jt(this.tracer,this.tracerFeedback.feedbackRequest)}logFeedbackResponse(e,t){Jt(this.tracer,this.tracerFeedback.feedbackResponse(t,e))}logRenderSponsoredLabel(){Jt(this.tracer,this.tracerFeedback.renderSponsoredLabel)}constructor(e,t){i(this,"tracerFeedback",void 0),i(this,"tracer",void 0),this.tracerFeedback=e,this.tracer=t}}const Jt=(e,t)=>{null==e||e.logTrace("adFeedBack",t)};var qt,Qt;(Qt=qt||(qt={})).REQUEST="adfeedback:request",Qt.SUCCESS="adfeedback:success",Qt.ERROR="adfeedback:error",Qt.LABEL_RENDER="adfeedback:sponsoredlabelrender";class Yt{incrementRequest(){Kt(qt.REQUEST,this.placementId,this.placementName)}incrementSuccess(){Kt(qt.SUCCESS,this.placementId,this.placementName)}incrementError(){Kt(qt.ERROR,this.placementId,this.placementName)}incrementLabelRendered(){Kt(qt.LABEL_RENDER,this.placementId,this.placementName)}constructor(e,t){i(this,"placementName",void 0),i(this,"placementId",void 0),this.placementName=e,this.placementId=t}}const Kt=(e,t,n)=>{pe(n,t,e,1)};var Xt={},$t=Xt&&Xt.__createBinding||(Object.create?function(e,t,n,a){void 0===a&&(a=n);var o=Object.getOwnPropertyDescriptor(t,n);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,a,o)}:function(e,t,n,a){void 0===a&&(a=n),e[a]=t[n]}),Zt=Xt&&Xt.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),en=Xt&&Xt.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)"default"!==n&&Object.prototype.hasOwnProperty.call(e,n)&&$t(t,e,n);return Zt(t,e),t};Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.AD_LOAD_COUNTERS=Xt.csa=Xt.csm=void 0;var tn=en(o("a1rh1"));Xt.csm=tn;var nn=en(o("iMV0g"));Xt.csa=nn;var an,on,rn={};Object.defineProperty(rn,"__esModule",{value:!0}),rn.AD_LOAD_COUNTERS=void 0,rn.AD_LOAD_COUNTERS={HTML_REACHED:"adload:htmlreached"},Object.defineProperty(Xt,"AD_LOAD_COUNTERS",{enumerable:!0,get:function(){return rn.AD_LOAD_COUNTERS}}),(on=an||(an={})).REQUEST="adfeedback_request",on.SUCCESS="adfeedback_success",on.ERROR="adfeedback_error",on.LABEL_RENDER="adfeedback_sponsoredlabelrender";class sn{logRequest(){Xt.csa.events().log(an.REQUEST,this.placementName,this.placementId)}logSuccess(){Xt.csa.events().log(an.SUCCESS,this.placementName,this.placementId)}logError(){Xt.csa.events().log(an.ERROR,this.placementName,this.placementId)}logLabelRendered(){Xt.csa.events().log(an.LABEL_RENDER,this.placementName,this.placementId)}constructor(e,t){i(this,"placementName",void 0),i(this,"placementId",void 0),this.placementName=e,this.placementId=t}}class dn{get feedbackRequest(){return{adFeedbackRequest:{slot:this.placementName,placementId:this.placementId,endPoint:this.endpoint,feedbackDivStyle:this.feedbackDivStyle,requestUrl:this.endpoint}}}feedbackResponse(e,t){return{adFeedBackResponse:{feedbackResponseStarted:!0,feedBackResponseReturned:t,response:e}}}get renderSponsoredLabel(){return{renderSponsoredLabel:!0}}constructor(e,t,n,a){i(this,"placementName",void 0),i(this,"placementId",void 0),i(this,"endpoint",void 0),i(this,"feedbackDivStyle",void 0),this.placementName=e,this.placementId=t,this.endpoint=n,this.feedbackDivStyle=a}}const ln=(e,t,n,a,o)=>new cn(new Gt(new dn(e,t,n,a),o),new Yt(e,t),new sn(e,t));class cn{request(){this.tracerService.logFeedbackRequest(),this.sendCsmCounterService.incrementRequest(),this.logCsaEventService.logRequest()}success(e){this.sendCsmCounterService.incrementSuccess(),this.logCsaEventService.logSuccess(),this.tracerService.logFeedbackResponse(!0,e)}error(){this.sendCsmCounterService.incrementError(),this.logCsaEventService.logError(),this.tracerService.logFeedbackResponse(!1)}labelRendered(){this.tracerService.logRenderSponsoredLabel(),this.sendCsmCounterService.incrementLabelRendered(),this.logCsaEventService.logLabelRendered()}constructor(e,t,n){i(this,"tracerService",void 0),i(this,"sendCsmCounterService",void 0),i(this,"logCsaEventService",void 0),this.tracerService=e,this.sendCsmCounterService=t,this.logCsaEventService=n}}class un{isOk(){return"ok"===this.status}constructor(e,t,n){i(this,"status",void 0),i(this,"html",void 0),i(this,"script",void 0),this.status=e,this.html=t,this.script=n}}class pn{async getSponsoredLabelAndFeedbackLink(e){return fetch(this.windowRepo.origin()+e).then((e=>e.ok?e.json().then((e=>Promise.resolve(new un(e.status,e.html,e.script)))):Promise.reject(null))).catch((()=>Promise.reject(null)))}constructor(e){i(this,"windowRepo",void 0),this.windowRepo=e}}class mn{appendChildTo(e,t){var n,a;function o(e){const t=document.createElement("div");return t.setAttribute("id",e.getHtmlId()),n(t,e.feedbackStyles),t.append(function(e){const t=document.createElement("div");return t.innerHTML=e.labelText,n(t,e.labelStyles),t}(e)),t;function n(e,t){for(const[n,a]of t.entries())e.style.setProperty(n,a)}}t.position===zt.TOP?null===(n=hn(e))||void 0===n||n.prepend(o(t)):t.position===zt.BOTTOM&&(null===(a=hn(e))||void 0===a||a.append(o(t)))}updateElement(e,t){const n=hn(e);n&&(n.innerHTML=t.html,function(e,t){(function(e){const t=document.createElement("script");return e.prepend(t),t}(e)).innerHTML=t.script}(n,t))}clickChildLink(e){const t=null===(n=document.getElementById(e.getHtmlId()))||void 0===n?void 0:n.getElementsByTagName("a");var n;void 0!==t&&t.length>0&&t[0].click()}}const hn=e=>document.getElementById(e),fn=()=>new wn(new Wt(new mn,new pn({origin:()=>window.location.origin})));class wn{postSponsoredLabelWithFeedbackLink(e){this.feedbackService.createSponsoredLabelWithFeedbackLink(function(e){return new Ut(e.parentHtmlId,new Map(Object.entries(e.feedbackStyles)),e.labelText,new Map(Object.entries(e.labelStyles)),e.position,gn(e.urlPath,e.urlParameters))}(e),ln(e.placementName,e.placementId,gn(e.urlPath,e.urlParameters),e.feedbackStyles,e.tracer))}openModal(e){this.feedbackService.openModal(new Vt(e))}labelRendered({placement:e,feedback:t,tracer:n}){this.feedbackService.labelRendered(ln(e.name,e.id,gn(t.url.path,t.url.parameters),t.style,n))}constructor(e){i(this,"feedbackService",void 0),this.feedbackService=e}}const gn=(e,t)=>e+"?pl="+t;var vn;!function(e){e[e.BOTTOM=0]="BOTTOM",e[e.TOP=1]="TOP"}(vn||(vn={}));const bn=(e,t)=>{const n=(e,t)=>{var n,a;return null!==(a=null===(n=document.getElementById(e))||void 0===n?void 0:n.getAttribute(t))&&void 0!==a?a:null},a=n("ilmRelocatedHtml","data-relocated-html");a?$e.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",a):document.addEventListener("sendRelocatedHtmlContentEncodedToAd",(a=>{const o=n("ilmRelocatedHtml","data-relocated-html");o?$e.sendMessageToAd(e,"sendRelocatedHtmlContentEncodedToAd",o):t()}),{once:!0})},Sn=(e,t)=>{let n;try{n=ct(e,"pj",{measurementMethod:Rt.COUNT_ON_DOWNLOAD_CLIENT})}catch(e){return Ce("Unable to add pj to impression URL",e),pe(null,null,rt.ERROR,1),void be(dt.ERROR)}Dt(n,"ape_impression",t,(()=>{pe(null,null,rt.IMPRESSION+"loaded",1),be(dt.IMPRESSION+"loaded")}),(()=>{pe(null,null,rt.IMPRESSION+"error",1),be(dt.IMPRESSION+"error")})),pe(null,null,Pt.GLOBAL_IMPRESSION_FIRED_COUNTER,1)},yn=(e,t,n,a,o,i)=>{try{var r,s;const d=document.getElementById(a[e.arid].placementDivId),l=a[e.arid].iframeId;let c=null;const u=null===window||void 0===window||null===(r=window.renderingWeblabs)||void 0===r||null===(s=r.ADPT_SF_CLIENT_LATENCY_2023Q1_632539)||void 0===s?void 0:s.toLowerCase(),p=b(e.mediaType,e.adCreativeMetaData.adProgramId);c="t1"!==u&&"t3"!==u||p?We(e,l,t):Ve(e,l,n);const m=i?e.MAsfUrl:e.DAsfUrl;c.onload=()=>{Ht(m,t,e.slot,e.placementId,pe,be)},d.appendChild(c),Ee().sendLatencyMetric({latencyMetricType:Me,placementId:e.placementId,placementName:e.slot}),pe(e.slot,e.placementId,Z.IFRAME_CREATED,1),be(E.IFRAME_CREATED,e.slot,e.placementId),$e.adMap[e.arid]={slot:d,iframe:c,options:e};const h={id:c.id,src:c.src,scrolling:c.scrolling,height:c.height,width:c.width,className:c.className,styleCssText:c.style.cssText,sandbox:c.sandbox};o[e.arid].logTrace("createSafeFrame",h)}catch(t){Ce("Error creating safeFrame",t),o[e.arid]&&o[e.arid].logTrace("createSafeFrame",{error:{message:"errorCreatingSafeFrame",ex:t}})}},En=(e,{tracer:t})=>{fn().labelRendered({parentHtmlId:e.options.adPlacementMetaData.adElementId,placement:{name:e.options.slot,id:e.options.placementId},feedback:{style:e.options.feedbackDivStyle,url:{path:e.options.adFeedbackInfo.endPoint,parameters:encodeURIComponent(JSON.stringify({adPlacementMetaData:e.options.adPlacementMetaData,adCreativeMetaData:e.options.adCreativeMetaData}))}},tracer:t})},In=e=>{fn().openModal(e.options.adPlacementMetaData.adElementId)},Tn=(e,t)=>{Ee().sendLatencyMetric(Tt(It({},t),{placementName:e.options.slot,placementId:e.options.placementId}))};const Rn=new class{addAdHandler(e,t,n,a){this.ADS_HANDLERS[e]=this.ADS_HANDLERS[e]||{},this.ADS_HANDLERS[e][n]=w(a,Ce,"Error within ad handler "+n+": "+t)}constructor(e){i(this,"ADS_HANDLERS",{}),i(this,"AD_IDS",{}),i(this,"AD_TRACERS",{}),i(this,"buildTimeReplacements",void 0),i(this,"supportedCommands",{sendAdBarTrace:(e,t)=>{e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace(t.field,t.traceInfo)},logAPIInvocation:(e,t)=>{pe(null,null,ae.API+t.apiName,1),pe(e.options.slot,e.options.placementId,ae.API+t.apiName,1),e.options.arid in this.AD_TRACERS&&this.AD_TRACERS[e.options.arid].logTrace("apiCalls",t)},resizeSafeFrameAd:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultResizeSafeFrameHandler),qe(e.options.arid,e.options.size.width,e.options.size.height,e.options.maxAdWidth,$e,this.AD_IDS)},setResizePlacementStyle:e=>{window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].defaultSetResizePlacementStyle),Je(e.options.arid,this.AD_IDS,e.options.resizePlacementStyle)},changeSize:(e,t)=>{const n=e.options.allowedSizes;if(void 0===e.options.allowChangeSize||e.options.allowChangeSize)if(Fe(t,n,xe))e.slot.style.width=t.width,e.iframe.height=t.height,e.iframe.width=t.width;else{Ce("Size is not allowlisted: "+t.width+" x "+t.height+$e.appendErrorDetails(e.options.arid))}},startPixelTracking:gt,startPixelTrackingForLegacyImpression:bt,collapseSlot:e=>{Ge(this.AD_IDS[e.options.arid].placementDivId),Ge(this.AD_IDS[e.options.arid].auiCardDeckId),"nav-sitewide-msg"===e.options.slotName&&Ke("amznJQ.available:navbarJSLoaded",(()=>{void 0!==parent.navbar&&"function"==typeof parent.navbar.unHideSWM&&parent.navbar.unHideSWM()}))},logError:(e,t)=>{Ce(t.message+$e.appendErrorDetails(e.options.arid)+": "+e.options.slot,t.error)},logCsaEvent:(e,t)=>{be(t.metricName,e.options.slot,e.options.placementId)},addCsaEntity:(e,t)=>{Se(t)},sendLatencyMetric:(e,t)=>Tn(e,t),countMetric:(e,t)=>{t.isGlobal?pe(null,null,t.metricMsg,t.value):pe(e.options.slot,e.options.placementId,t.metricMsg,t.value)},addCsmTag:(e,t)=>{t.isGlobal?me(t.tag,null,null,t.msg):me(t.tag,e.options.slot,e.options.placementId,t.msg)},fireViewableLatencyMetrics:(e,t)=>{var n,a,o,i;n=e.options.arid,a=e.options.slot,o=e.options.placementId,i=t.adLoadedTimestamp,window.apeViewableLatencyTrackers&&window.apeViewableLatencyTrackers[n]&&window.apeViewableLatencyTrackers[n].valid&&(window.apeViewableLatencyTrackers[n].loaded=!0,window.apeViewableLatencyTrackers[n].viewed&&(Ee().sendLatencyMetric({latencyMetricType:Pe,placementId:o,placementName:a,timestamp:new Date(i)}),pe(a,o,"htmlviewed:loaded",1)))},customMessage:(e,t)=>{$e.customMessage(t.key,t.body,e.options.allowlistedCustomMessageEvents,e.options.slot,e.options.placementId)},enableViewabilityTracker:e=>{$e.updateViewability(e.options.arid);const t=fe(20,$e.updateViewability);if(this.addAdHandler(e.options.arid,e.options.slot,"viewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].viewabilityTracker),He()){new IntersectionObserver((()=>{$e.updateViewability(e.options.arid)}),{threshold:[0,.5,1]}).observe(e.slot)}},enableNoInventoryViewabilityTrackerAndInvokeFallback:e=>{$e.takeSnapshotOfSlotPosition(e.options.arid),$e.updateNoInventoryViewability(e.options.arid),$e.sendMessageToAd(e.options.arid,"handleFallbackBehavior",{});const t=fe(20,$e.updateNoInventoryViewability);this.addAdHandler(e.options.arid,e.options.slot,"noInventoryViewabilityTracker",(()=>{t(e.options.arid)})),window.addEventListener("scroll",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),window.addEventListener("resize",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker),document.addEventListener("visibilitychange",this.ADS_HANDLERS[e.options.arid].noInventoryViewabilityTracker)},safeFrameReady:e=>{var t;(null===(t=e.options.expParams)||void 0===t?void 0:t.ilmRelocatedHtmlIsActive)&&!e.options.htmlContentEncoded&&bn(e.options.arid,(()=>{Ge(this.AD_IDS[e.options.arid].placementDivId)}))},requestVideoAutoplay:(e,t)=>{K(e,t,$e)},releaseVideoAutoplay:()=>{X()},haveVideoAutoplayPermission:e=>{$(e)},logSafeframeResourceTimingData:(e,t)=>{new Et(e,t).log()},saveAdDetailsForAdReporter:(e,t)=>{if(!window.adReporterConfig)return;window.adReporterDetails||(window.adReporterDetails={});const n=e.options.slotName;t&&n===t.slotName?window.adReporterDetails[n]=t:window.adReporterDetails[n]||(window.adReporterDetails[n]=JSON.stringify(e))},feedbackLabelRendered:e=>En(e,{tracer:this.AD_TRACERS[e.options.arid]}),feedbackOpenModal:e=>In(e)}),i(this,"initSafeFrame",(()=>{if(window.DAsf&&window.DAsf.loadAds)return void window.DAsf.loadAds();var e,t,n,a;window.DAsf={version:this.buildTimeReplacements.version},"t1"===(null===window||void 0===window||null===(e=window.renderingWeblabs)||void 0===e||null===(t=e.ADPT_SF_MRC_RETEST_643771)||void 0===t?void 0:t.toLowerCase())?(pe(null,null,rt.TREATMENT,1),at().forEach((e=>{try{Sn(e,document.body),pe(null,null,rt.IMPRESSION,1),be(dt.IMPRESSION)}catch(e){pe(null,null,rt.ERROR,1),be(dt.ERROR)}}))):"c"===(null===window||void 0===window||null===(n=window.renderingWeblabs)||void 0===n||null===(a=n.ADPT_SF_MRC_RETEST_643771)||void 0===a?void 0:a.toLowerCase())?pe(null,null,rt.CONTROL,1):(pe(null,null,rt.NO_WEBLAB,1),tt()),window.csa&&(we.events=window.csa("Events",{producerId:"adplacements"})),pe(null,null,ie.VERSION+":"+window.DAsf.version,1),be(D.VERSION+window.DAsf.version),window.addEventListener("message",$e.receiveMessage,!1),$e.supportedCommands=this.supportedCommands,window.DAsf.registerCustomMessageListener=$e.registerCustomMessageListener,window.DAsf.sendCustomMessage=$e.sendCustomMessage;window.DAsf.loadAds=()=>{const e="data-arid",t=(e,t)=>{this.AD_IDS[e]={slotId:t,placementDivId:"ape_"+t+"_placement",iframeId:"ape_"+t+"_iframe",auiCardDeckId:"ape_"+t+"_aui_cardDeck"}},n=e=>{const t={};try{const n=window.location.search.substring(1).split("&");for(let a=0;a<n.length;a++){const o=n[a].split("="),i=o[0];o.length>1&&e.indexOf(i)>-1&&(t[i]=o[1])}}catch(e){Ce("Error parsing query parameters",e)}return t},a=e=>()=>{qe(e.arid,e.size.width,e.size.height,e.maxAdWidth,$e,this.AD_IDS)},o=e=>()=>{Je(e.arid,this.AD_IDS,e.resizePlacementStyle)},i=t=>{const n=()=>{var e;return null===(e=null==$e?void 0:$e.adMap[t.arid])||void 0===e?void 0:e.iframe};return w((()=>{const a={callbackOccurred:!0};a.loadAfter=t.loadAfter,this.AD_TRACERS[t.arid].logTrace("pageCallBack",a),pe(t.slot,t.placementId,Z.CALLBACK,1),be(E.CALLBACK,t.slot,t.placementId);var o,i;((t,n)=>{if(!t)return!1;const a=document.getElementById(t);if(a&&!a.innerHTML){const t=a.getAttribute(e);if(t&&t===n.arid)return!0}return!1})(this.AD_IDS[t.arid].placementDivId,t)&&(yn(t,t.safeFrameSrc,this.buildTimeReplacements.desktopSafeFrameClientHtmlContentEncoded,this.AD_IDS,this.AD_TRACERS,!1),n()&&(o=t,i=this.AD_TRACERS[t.arid],o.adFeedbackInfo.boolFeedback&&fn().postSponsoredLabelWithFeedbackLink({parentHtmlId:o.adPlacementMetaData.adElementId,feedbackStyles:o.feedbackDivStyle,labelText:y(o.adFeedbackInfo.sponsoredText),labelStyles:o.advertisementStyle,position:o.adFeedbackInfo.adFeedbackOnTop?vn.TOP:vn.BOTTOM,urlPath:o.adFeedbackInfo.endPoint,urlParameters:encodeURIComponent(JSON.stringify({adPlacementMetaData:o.adPlacementMetaData,adCreativeMetaData:o.adCreativeMetaData})),placementName:o.slot,placementId:o.placementId,tracer:i})))}),Ce,"Error in callback to create Safeframe.")},r="text/x-dacx-safeframe";let d=document.getElementsByClassName(r);0===d.length&&(d=document.getElementsByTagName("script"));for(const l of d)if("DIV"===l.tagName&&l.classList.contains(r)||l.getAttribute("type")===r)try{const r=L(l.getAttribute("data-csa-c-slot-id")),d=r||JSON.parse(l.getAttribute("data-ad-details")||l.text||l.innerHTML||l.innerText);M(d);const c="ape_"+d.slot+"_placement",u=document.getElementById(c);!$e.adMap[d.arid]&&u&&u.innerHTML&&(u.innerHTML="",l.removeAttribute(e));if(l.getAttribute(e))continue;d.arid=d.arid||Math.random().toString(16).slice(2),this.AD_TRACERS[d.arid]=new s(d.traceId,window[d.slotName]&&window[d.slotName].adStartTime||0),this.AD_TRACERS[d.arid].logTrace("safeFrameInput",d);const p={caches:window.caches?window.caches:null,plugins:document.plugins?document.plugins:null,cookies:document.cookie?document.cookie:null,userAgents:navigator.userAgent?navigator.userAgent:null};this.AD_TRACERS[d.arid].logTrace("browserData",p),l.setAttribute(e,d.arid),d.hostDomain=location.protocol+"//"+location.host,d.allowedSizes="object"==typeof d.allowedSizes&&d.allowedSizes.length>=0?d.allowedSizes.concat(d.size):[d.size];const m="d3l3lkinz3f56t.cloudfront.net,g-ecx.images-amazon.com,z-ecx.images-amazon.com,images-na.ssl-images-amazon.com,g-ec4.images-amazon.com,images-cn.ssl-images-amazon.com".split(",");if(d.allowedDomains="object"==typeof d.allowedDomains&&d.allowedDomains.length>=0?d.allowedDomains.concat(m):m,d.queryParams=n(d.allowlistedQueryParamKeys),d.aPageStart=window.aPageStart,d.adStartTime=window[d.slotName]&&window[d.slotName].adStartTime||0,this.addAdHandler(d.arid,d.slot,"defaultResizeSafeFrameHandler",a(d)),this.addAdHandler(d.arid,d.slot,"defaultSetResizePlacementStyle",o(d)),t(d.arid,d.slot),"clickTracking"in d&&""===d.clickTracking&&(d.clickTracking=h(d)),d.forcePunt){me("forcePunt",d.slot,d.placementId),Se({forcePunt:"true"}),Ge(this.AD_IDS[d.arid].placementDivId);continue}const f=ke(),w="true"===d.abpAcceptable&&("1"===d.abpStatus||"-1"===d.abpStatus);if(b(d.mediaType,d.adCreativeMetaData.adProgramId)){const e=f+this.buildTimeReplacements.desktopSafeFrameVideoPath,t=f+this.buildTimeReplacements.allowlistedSafeFrameVideoPath;d.safeFrameSrc=w?t:e}else{const e=f+this.buildTimeReplacements.desktopSafeFramePath,t=f+this.buildTimeReplacements.allowlistedSafeFramePath;d.safeFrameSrc=w?t:e}if(d.abpStatus){me("ABPStatus"+S[d.abpStatus],d.slot),Se({ABPStatus:S[d.abpStatus]});for(const e in S)pe(d.slot,d.placementId,oe[e],d.abpStatus===e?1:0),d.abpStatus===e&&be(A[e],d.slot,d.placementId)}d.collectSafeframeRTD=window.collectSafeframeRTD,Ee().sendLatencyMetric({latencyMetricType:Le,placementId:d.placementId,placementName:d.slot}),Ee().sendLatencyMetric({latencyMetricType:Oe,placementId:d.placementId,placementName:d.slot}),Ee().sendLatencyMetric({latencyMetricType:_e,placementId:d.placementId,placementName:d.slot}),pe(d.slot,d.placementId,Z.START,1),be(E.START,d.slot,d.placementId);const g={hostDomain:d.hostDomain,allowedSizes:d.allowedSizes,allowedDomains:d.allowedDomains,queryParams:d.queryParams,aPageStart:d.aPageStart,adStartTime:d.adStartTime,safeFrameSrc:d.safeFrameSrc,abpStatus:d.abpStatus};Ke(d.loadAfter,i(d),0,l),g.loadAfter=d.loadAfter,this.AD_TRACERS[d.arid].logTrace("additionalInitilizationParams",g)}catch(e){Ce("Error parsing sf tag",e)}},window.DAsf.loadAds()})),this.buildTimeReplacements=e}}({version:"1.50.4d8cb23",desktopSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/desktop/sfVideo-1.50.4d8cb23.html",allowlistedSafeFrameVideoPath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sfVideo-1.50.4d8cb23.html",desktopSafeFramePath:"/images/S/apesafeframe/ape/sf/desktop/sf-1.50.4d8cb23.html",allowlistedSafeFramePath:"/images/S/apesafeframe/ape/sf/whitelisted/desktop/sf-1.50.4d8cb23.html",desktopSafeFrameClientHtmlContentEncoded:"~~desktopSafeFrameClientHtmlContentEncoded~~"});w((()=>Rn.initSafeFrame()),Ce,"Error initializing safeFrame")()}();
//# sourceMappingURL=DAsf.min.js.map
